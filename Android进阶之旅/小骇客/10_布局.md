### 布局过程

- 确定每个 View 的位置和尺寸
- 作用：为绘制和触摸范围作支持
  - 绘制：知道往哪里绘制
  - 触摸反馈：知道用户点的是哪里

### 流程

- 测量流程：从根  View 递归调用每一级子 View 的 measure 方法，对他们进行测量

- 布局流程：从根 View 递归调用每一级子 View 的 layout 方法，把测量过程得出的子 View 的位置和尺寸传给子 View（左上右下），子 View 保存

- 为什么要分两个流程?

  主要是因为测量过程比较复杂，有时候对于同一个 view 可能不止一次测量。

  例如：LinearLayout 的 宽高是 wrap，里面有三个 子 View，第一个的宽度是 math ，其他的都是固定的。这种情况要怎么测量？外面说根据里面的大小，里面说外面多大我就多大，这种情况下在测量的时候就会给第一个 view 测量一个 0 宽度，然后继续测量其他子 View，然后找到其中最大的宽度后，接着就会对第一个重新进行测量，并且它的宽度为刚才拿到的宽度。

  这种情况下就需要测量多次，并且较为复杂，所以说不适合放在一个流程中

### 流程：个体

1. 运行前，在 xml 中写入对 View 的布局要求，如 layout_xxx，所有 layout 开头的属性都是给父 VIew 看的。

2. 父 VIew 在自己的 onMeasure 中，根据 xml 中写的对子 View 的要求，和自己可用空间，得出对子 View 的具体尺寸和要求

3. 子 View 在自己的 onMeasure 中，根据自己的特性计算出自己的期望尺寸

   如果是 ViewGroup，还会在这里调用每个子 View 的 measure 进行测量

4. 父 View 在 子 View 计算出期望尺寸后，得出子 View 的实际尺寸和 位置

5. 子 View 在 layout 方法中，将父 View 传进来的自己的实际尺寸和位置保存

   如果是 ViewGroup，还会在 onLayout 里调用每个 view 的 layout 方法把他们的尺寸位置传给他们。