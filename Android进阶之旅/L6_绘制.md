### 自定义View 之  绘制



### 基本要素

- onDraw(Canvas)

  绘制方法 ，[常用 Api](https://blog.csdn.net/baidu_40389775/article/details/90727771)

- Canvas

  画布

- Paint

  画笔

- Path

  线

  **Path.Direction** ：一个枚举类，内部定义类两种方式

  - CCW ：逆时针
  - CW ：顺时针

  一般情况下这两种看不到啥区别，但是当 path 相交的时候就有区别了。

  **如果判断相交的地方在内部还是在外部？**

  例如：画了两个圆，两个圆之间相交了，那么相交的部分到底是圆内，还是圆外呢？

  这个其实和算法有关系，判断是否在院内的算法就是：从 View 中取一个点，然后画一条线，如果**这个线和别的线有相交的地方，如果相交的线是往顺时针 则-1，否则 +1，到最后，这个数为 0 则表示这个点在圆外，否则在圆内。**

  ![image-20200703154609963](D:%5C345%5Cnote-instance%5CAndroid%E8%BF%9B%E9%98%B6%E4%B9%8B%E6%97%85%5CUntitled.assets%5Cimage-20200703154609963.png)

  如上图，两个圆是顺时针，从相交的地方拉一条线，结果是 2，表示是圆内，相交部分的颜色和圆的颜色是一样的。

  如果 下面的圆是逆时针呢？相交的地方就会是 -1，+1，最后为 0，则相交的地方的地方是圆的外部，则颜色就是圆外部的颜色。

  **Path.FillType** ：填充方式

  - WINDING

    缠绕着画，所有内部的全都在内部

  - EVEN_ODD

    一个往外画，穿过了双数条线，表示在外部，单数条表示在内部。这个和相交的方向没有关系。只要穿过就 +1.

  - INVERSE_WINDING

    和 WINDING 正好相反

  - INVERSE_EVEN_ODD

    和 EVEN_ODD 正好相反

  **PathMeasure** ：计算 path 的长度等，角度等。

- 坐标系

  位置，从屏幕的左上角开始，就是 (0,0)坐标，往右是 X 坐标，往下 是 Y 坐标。

- 尺寸单位

  在绘制的过程中，所有的尺寸都是 像素，而不是 dp，dp 只是用来做适配的。