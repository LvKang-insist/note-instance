Android 性能优化

### 什么是性能

​	快：流畅的体验，没有卡顿
​	稳：稳定，没有内存泄露，崩溃
​	省：省电，流量，代码质量和逻辑
​	小：安装包小

### 视图优化

1，过度绘制(Overdraw)

​	过度绘制指得就是屏幕上的某个像素在同一帧时间内被绘制了多次。
2，如何检测过度绘制
​	开发者选项-> 调试GPU 过度绘制 -> 显示过度绘制
3，过度绘制的优化
​	1，移除布局中不需要的背景
​		一些布局中的背景由于被该视图上所绘制的内容完全覆盖掉，因此这个背景实际上是多余的。如果没有移除
​		将会产生过度绘制，我们可以通过移除window 默认的Background 或者 移除控件中不需要的背景
​	2，将layout层级扁平化
​		使用嵌套的LinearLayout可能会导致布局的层次结构变得过深。如果在LinearLayout中使用了
​		layout_weight 的话 ，他每一个子view 都需要测量两次。特别实在ListView和GlidView中，会被反复测量。
​		布局嵌套过多会导致过度绘制，从而降低性能，因此我们需啊哟讲布局的层次结构尽量扁平化
​	3，使用Layout Inspector 去查看layout的层次结构
​		这里使用Android推荐的Layout Inspector来查看layout的层次结构。
​		在Android Studio中点击Tools > Android > Layout Inspector。然后在出现的 Choose Process 对话框中，选择想要检查的应用进程即可。
4，使用嵌套少的布局
5，使用 include，merge，ViewStub
6，使用 lint 来优化布局的层次结构
​		lint是一个静态代码分析工具，可以用来协助优化布局的性能。要使用lint，点击Analyze> Inspect Code即可，
7，减少透明度的使用
​		对于不透明的View ，只需要渲染一次既可以把他显示出来，如果这个View设置了alpha值，则至少需需要
​		渲染二次。这时因为使用了alpha 的view需要先知道和会view的下一层元素是什么，然后结合上层的View进行
​		Blend 混色处理。这就会造成过度绘制，我们可以通过减少渲染透明对象来改善过度绘制，比如：
​		在TextView 设置带透明度 alpha 值得黑色文本可以实现灰色的效果。但是直接通过设置灰色能够获得更好的性能
8，减少自定义View 的过度绘制，使用 clipRect()

9，能使用LinearLayout和FrameLayout 就不要使用RelativeLayout，因为 RelativeLayout控件机构比较负责，绘制也需耗时
10，如果嵌套过多，则可以使用约束布局ConstraintLayout
11，onDraw 方法中不做耗时任务，也不做过多的循环操作，特别是嵌套循环，虽然耗时很少，但是大量的循环势必霸占CPU的时间片，从而造成View的绘制过程不流畅
12，onDraw 中不要创建新的布局对象，因为onDraw 方法一般都会大量调用，就意味着会产生大量的临时对象，不仅会占用过多的内存，还有可能导致GC
13，使用GPU呈现模式分析工具来分析渲染速度。在开发者选项中可以找到。