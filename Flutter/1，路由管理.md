![0005b72e6a0746b0be300e6117d1595b_tplv-k3u1fbpfcp-zoom-1](https://gitee.com/lvknaginist/pic-go-picure-bed/raw/master/images/20210104125353.jpg)

### 什么是路由？

> 对于移动开发者来说，路由指的就是页面，在 Android 中就是 activity，在 ios 中Wie ViewController
>
> 说简单点就是映射页面跳转关系的，当然它也包含跳转相关的一切功能
>
> 而路由管理则就是管理这些页面直接跳转，通信方式等

### 示例

1，创建一个新的路由，命名 NewRoute

```dart
/// StatelessWidget 无状态组件
class NewRoute extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text("FlutterStudy"),
      ),
      body: Center(
        child: Text(
          "This is new route",
          style: Theme.of(context).textTheme.headline3,
        ),
      ),
    );
  }
}
```

2，创建一个文本按钮，点击进行跳转

```dart
FlatButton(
    child: Text("点击跳转"),
    textColor: Colors.red,
    onPressed: () {
        //导航到新的路由
        Navigator.push(context, MaterialPageRoute(builder: (context) {
            return NewRoute();
        }));
    },
)
```

效果：<img src="https://gitee.com/lvknaginist/pic-go-picure-bed/raw/master/images/20210104132341.gif" alt="GIF 2021-1-4 13-22-15" style="zoom:50%;" />

### MaterialPageRoute

MaterialPageRoute 是 Material 组件库提供的组件，他可以针对不同的平台，实现与平台页面切换动画风格一致切换动画

MaterialPageRoute 继承自 PageRoute 类，PageRoute 是一个抽象类，表示整个屏幕空间的一个模态路由页面，其中定义了路由构建及切换时过度动画的相关接口和属性；如果想自定义路由切换动画，可自己继承 PageRoute 来实现

- 构造方法

  ```dart
  MaterialPageRoute({
    required this.builder,
    RouteSettings? settings,
    this.maintainState = true,
    bool fullscreenDialog = false,
  }) 
  ```

  - builder

    是 WidgetBuilder 类型的回调函数，它的作用是构建路由的具体内容，返回值是一个 widget；

    通常要实现此回调，返回新路由的实例

  - setting

    包含路由的配置信息，例：路由名称，是否初始路由等

  - maintainState

    默认情况下，当入栈一个新的路由时，原来的路由仍然会保存在内存中，如果想在路由没用的时候释放其所占用的资源，可以设置为 false

  - fullscreenDialog

    表示新的路由是否是一个全屏的模态对话框，在 ios 中若此参数为 true，新页面会从底部滑入，而不是水平方向

### Navigator

Navigator 是一个路由管理组件，它提供了打开和退出路由方法

Navigator 通过栈来管理活动路由集合，通常屏幕显示的页面就是栈顶路由

#### 打开一个页面

```dart
 static Future<T?> push<T extends Object?>(BuildContext context, Route<T> route) {
    return Navigator.of(context)!.push(route);
  }
```

将给定的路由入栈（打开页面），返回 future 对象，用于接收该路由出栈是返回的数据。

#### 关闭一个页面

```dart
static void pop<T extends Object?>(BuildContext context, [ T? result ]) {
  Navigator.of(context)!.pop<T>(result);
}
```

将栈顶路由出栈，reslut 为要返回给上一个页面的数据